#!/usr/bin/env bash

DATA=w_5_d_10_c_20_i_50.data
DATA=w_2_d_10_c_20_i_100.data
tmux send-keys -t 0 "clear && tmux clear-history && ./deployJMcast.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json" Enter
tmux send-keys -t 1 "clear && tmux clear-history && ./deployOracle.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/$DATA localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 900 20000 |& tee oracle.out" Enter
tmux send-keys -t 2 "clear && tmux clear-history && ./deployServer.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/$DATA localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 900 20000 |& tee server.out" Enter
tmux send-keys -t 3 "clear && tmux clear-history && ./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/$DATA 0|& tee client1.out" Enter
#tmux send-keys -t 3 "clear && tmux clear-history && ./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/$DATA 5|& tee client1.out" Enter
#tmux send-keys -t 4 "clear && tmux clear-history && ./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/$DATA 2|& tee client2.out" Enter



# ./deployOracle.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 90 20000


# ./deployServer.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 90 20000
# java -XX:+UseG1GC -Xmx2g -Dlog4j.configuration=file:/Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/log4jLocal.xml -cp '/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dependencies/guava-19.0.jar:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarV2/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/libjmcast/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/libmcad/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/netwrapper/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/ridge/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/sense/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dependencies/*' -DHOSTNAME=0-0 ch.usi.dslab.lel.dynastar.tpcc.TpccServer 0 /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 90 20000
# java -XX:+UseG1GC -Xmx2g -Dlog4j.configuration=file:/Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/log4jLocal.xml -cp '/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dependencies/guava-19.0.jar:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarV2/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/libjmcast/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/libmcad/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/netwrapper/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/ridge/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/sense/target/classes:/Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dependencies/*' -DHOSTNAME=0-0 ch.usi.dslab.lel.dynastar.tpcc.TpccServer 1 /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 90 20000

// auto
./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data 1 1 100 0 0 0 0

// interactive
./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data 1 0 100 0 0 0 0

docker exec -it mongo-redis-node-8 redis-cli flushall



1p
./deployJMcast.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config_1p.json
./deployOracle.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config_1p.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning_1p.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_1_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 900 20000./deployOracle.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 900 20000
./deployServer.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_system_config_1p.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/systemConfigs/jmcast_minimal_partitioning_1p.json /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_1_d_10_c_20_i_100.data localhost 50000 /Users/longle/Dropbox/Workspace/PhD/ScalableSMR/dynastarTPCC/logs 900 20000 |& tee server.out
./deployClient.py /Users/longle/Documents/Workspace/PhD/ScalableSMR/dynastarTPCC/bin/databasesV3/w_2_d_10_c_20_i_100.data 0 100 0 0 0 0